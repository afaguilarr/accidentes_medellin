knitr::opts_chunk$set(echo = TRUE)
##Carga de paquetes previos
library(tidyverse)
##Lectura de las 5 bases de datos desde el drectorio
getwd() #CHECKEAR QUE EL DIRECTORIO SEA: "/accidentes_medellin/Descriptiva y depuracion"
files_names= list.files(pattern="*.csv", path =  paste(getwd(),"/Datasets",sep=""))
path <- paste(getwd(),"/Datasets/",files_names,sep="")
df <- do.call(rbind, lapply(path, function(x) read.csv(x, stringsAsFactors = FALSE,encoding = 'UTF-8', ) )) ##se leen y se juntas las 5 bases de datos usando los nombres de los archivos.
install.packages("flexclust")
setwd(dirname(rstudioapi::getActiveDocumentContext()$path))
pkg_test_and_load <- function(pkg)
{
if(pkg %in% rownames(installed.packages()))
{
library(pkg, character.only = TRUE)
}
else
{
install.packages(pkg, dependencies = TRUE)
library(pkg, character.only = TRUE)
}
}
init_pkgs <- function()
{
pkgs <- c("mvtnorm", "ggplot2", "MBESS", "Matrix", "ks",
"caret", "rgdal", "leaflet", "knitr","rmarkdown",
"PKI", "packrat", "raster", "tidyverse")
lapply(pkgs, pkg_test_and_load)
}
init_pkgs()
dias_especiales <- read.csv("./dias_espe.csv")
comunas_dias <- read.csv("./comunas_dia.csv")
barrios_dia <- read.csv("./barrios_dia.csv")
View(dias_especiales)
View(comunas_dias)
pkgs <- c("mvtnorm", "ggplot2", "MBESS", "Matrix", "ks",
"caret", "rgdal", "leaflet", "knitr","rmarkdown",
"PKI", "packrat", "raster", "tidyverse", "fastDummies")
setwd(dirname(rstudioapi::getActiveDocumentContext()$path))
pkg_test_and_load <- function(pkg)
{
if(pkg %in% rownames(installed.packages()))
{
library(pkg, character.only = TRUE)
}
else
{
install.packages(pkg, dependencies = TRUE)
library(pkg, character.only = TRUE)
}
}
init_pkgs <- function()
{
pkgs <- c("mvtnorm", "ggplot2", "MBESS", "Matrix", "ks",
"caret", "rgdal", "leaflet", "knitr","rmarkdown",
"PKI", "packrat", "raster", "tidyverse", "fastDummies")
lapply(pkgs, pkg_test_and_load)
}
init_pkgs()
dias_especiales <- read.csv("./dias_espe.csv")
comunas_dias <- read.csv("./comunas_dia.csv")
barrios_dia <- read.csv("./barrios_dia.csv")
fixed_days <- paste(dias_especiales, collapse = "/")
fixed_days <- data.frame(paste(dias_especiales, collapse = "/"))
View(fixed_days)
fixed_days <- data.frame(paste(dias_especiales[1:3], collapse = "/"))
help(pasete)
help(paste)
fixed_days <- data.frame(paste(dias_especiales$DIA, dias_especiales$MES
, dias_especiales$PERIODO, collapse = "/"))
View(fixed_days)
dias_especiales$pasted <- paste(dias_especiales$DIA, dias_especiales$MES
, dias_especiales$PERIODO, collapse = "/")
dias_especiales$pasted <- paste(dias_especiales$DIA, dias_especiales$MES
, collapse = "/")
dias_especiales$pasted <- paste(dias_especiales$DIA, dias_especiales$MES
, sep = "/")
View(dias_especiales)
dias_especiales$pasted <- paste(dias_especiales$DIA, dias_especiales$MES,
, dias_especiales$PERIODO, sep = "/")
dias_especiales$pasted <- paste(dias_especiales$DIA, dias_especiales$MES,
dias_especiales$PERIODO, sep = "/")
comunas_dias$pasted <- paste(comunas_dias$DIA, comunas_dias$MES,
comunas_dias$PERIODO, sep = "/")
barrios_dia$pasted <- paste(barrios_dia$DIA, barrios_dia$MES,
barrios_dia$PERIODO, sep = "/")
View(comunas_dias)
View(barrios_dia)
remove(fixed_days)
init_pkgs <- function()
{
pkgs <- c("mvtnorm", "ggplot2", "MBESS", "Matrix", "ks",
"caret", "rgdal", "leaflet", "knitr","rmarkdown",
"PKI", "packrat", "raster", "tidyverse", "fastDummies", "dummies")
lapply(pkgs, pkg_test_and_load)
}
init_pkgs()
barrios_dias_dummies <- cbind(barrios_dia, dummy(dias_especiales$pasted, sep = "_"))
comunas_dias$especial <- ifelse(comunas_dias$pasted == dias_especiales$pasted, 1, 0)
barrios_dia$especial <- ifelse(barrios_dia$pasted == dias_especiales$pasted, 1, 0)
comunas_dias$especial <- ifelse(comunas_dias$pasted %in% dias_especiales$pasted, 1, 0)
barrios_dia$especial <- ifelse(barrios_dia$pasted %in% dias_especiales$pasted, 1, 0)
View(dias_especiales)
View(comunas_dias)
mean(barrios_dia[barrios_dia$especial==1,]$total)
mean(barrios_dia[barrios_dia$especial==0,]$total)
mean(comunas_dias[comunas_dias$especial==1,]$total)
mean(comunas_dias[comunas_dias$especial==0,]$total)
'ñ' %in% comunas_dias$COMUNA
'ñ' %in% comunas_dias$COMUNA
'ñ' %in% comunas_dias$COMUNA
help("write.csv")
write.csv(x = barrios_dia, file = "barrios_dia_esp.csv")
write.csv(x = comunas_dias, file = "comunas_dias_esp.csv")
